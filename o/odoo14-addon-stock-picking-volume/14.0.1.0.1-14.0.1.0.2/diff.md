# Comparing `tmp/odoo14_addon_stock_picking_volume-14.0.1.0.1-py3-none-any.whl.zip` & `tmp/odoo14_addon_stock_picking_volume-14.0.1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,24 @@
-Zip file size: 28398 bytes, number of entries: 22
--rw-r--r--  2.0 unx     4488 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/README.rst
--rw-r--r--  2.0 unx       70 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/__init__.py
--rw-r--r--  2.0 unx      793 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/__manifest__.py
--rw-r--r--  2.0 unx     1097 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/hooks.py
--rw-r--r--  2.0 unx     2019 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/i18n/stock_picking_volume.pot
--rw-r--r--  2.0 unx       53 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/models/__init__.py
--rw-r--r--  2.0 unx     1796 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/models/stock_move.py
--rw-r--r--  2.0 unx      947 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/models/stock_picking.py
--rw-r--r--  2.0 unx      123 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       99 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/readme/CREDITS.rst
--rw-r--r--  2.0 unx      564 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      747 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/static/description/icon.png
--rw-r--r--  2.0 unx    14220 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/static/description/index.html
--rw-r--r--  2.0 unx       40 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/tests/__init__.py
--rw-r--r--  2.0 unx     5366 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/tests/test_stock_picking_volume.py
--rw-r--r--  2.0 unx      964 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/views/stock_move.xml
--rw-r--r--  2.0 unx     1083 b- defN 23-Apr-21 08:04 odoo/addons/stock_picking_volume/views/stock_picking.xml
--rw-r--r--  2.0 unx     5164 b- defN 23-Apr-21 08:04 odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-21 08:04 odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Apr-21 08:04 odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2391 b- defN 23-Apr-21 08:04 odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/RECORD
-22 files, 51576 bytes uncompressed, 24286 bytes compressed:  52.9%
+Zip file size: 28642 bytes, number of entries: 22
+-rw-r--r--  2.0 unx     4488 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/README.rst
+-rw-r--r--  2.0 unx       70 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/__init__.py
+-rw-r--r--  2.0 unx      793 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/__manifest__.py
+-rw-r--r--  2.0 unx     1097 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/hooks.py
+-rw-r--r--  2.0 unx     2019 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/i18n/stock_picking_volume.pot
+-rw-r--r--  2.0 unx       53 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/models/__init__.py
+-rw-r--r--  2.0 unx     1796 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/models/stock_move.py
+-rw-r--r--  2.0 unx     1184 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/models/stock_picking.py
+-rw-r--r--  2.0 unx      123 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       99 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/readme/CREDITS.rst
+-rw-r--r--  2.0 unx      564 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      747 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/static/description/icon.png
+-rw-r--r--  2.0 unx    14220 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/static/description/index.html
+-rw-r--r--  2.0 unx       40 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/tests/__init__.py
+-rw-r--r--  2.0 unx     7012 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/tests/test_stock_picking_volume.py
+-rw-r--r--  2.0 unx      964 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/views/stock_move.xml
+-rw-r--r--  2.0 unx     1083 b- defN 23-Jun-26 17:29 odoo/addons/stock_picking_volume/views/stock_picking.xml
+-rw-r--r--  2.0 unx     5164 b- defN 23-Jun-26 17:29 odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-26 17:29 odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-26 17:29 odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2392 b- defN 23-Jun-26 17:29 odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/RECORD
+22 files, 53460 bytes uncompressed, 24530 bytes compressed:  54.1%
```

## zipnote {}

```diff
@@ -48,20 +48,20 @@
 
 Filename: odoo/addons/stock_picking_volume/views/stock_move.xml
 Comment: 
 
 Filename: odoo/addons/stock_picking_volume/views/stock_picking.xml
 Comment: 
 
-Filename: odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/METADATA
+Filename: odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/WHEEL
+Filename: odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/top_level.txt
+Filename: odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/RECORD
+Filename: odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_picking_volume/__manifest__.py

```diff
@@ -2,15 +2,15 @@
 # Copyright 2023 Michael Tietz (MT Software) <mtietz@mt-software.de>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Stock Picking Volume",
     "summary": """
         Compute volume information on stock moves and pickings""",
-    "version": "14.0.1.0.1",
+    "version": "14.0.1.0.2",
     "license": "AGPL-3",
     "author": "ACSONE SA/NV,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/stock-logistics-warehouse",
     "maintainers": ["lmignon"],
     "depends": [
         "product_dimension",
         "stock",
```

## odoo/addons/stock_picking_volume/models/stock_picking.py

```diff
@@ -12,18 +12,24 @@
     volume = fields.Float(
         compute="_compute_volume", readonly=False, store=True, compute_sudo=True
     )
     volume_uom_name = fields.Char(
         string="Volume unit of measure label", compute="_compute_volume_uom_name"
     )
 
-    @api.depends("move_lines", "move_lines.volume")
+    @api.depends("move_lines", "move_lines.volume", "move_lines.state")
     def _compute_volume(self):
         for picking in self:
-            new_volume = sum(picking.move_lines.mapped("volume"))
-            if picking.volume != new_volume:
-                picking.volume = new_volume
+            moves = picking.move_lines
+            exclude_cancel = any(m.state != "cancel" for m in moves)
+            volume = 0
+            for move in moves:
+                if move.state == "cancel" and exclude_cancel:
+                    continue
+                volume += move.volume
+            if picking.volume != volume:
+                picking.volume = volume
 
     def _compute_volume_uom_name(self):
         self.volume_uom_name = self.env[
             "product.template"
         ]._get_volume_uom_name_from_ir_config_parameter()
```

## odoo/addons/stock_picking_volume/tests/test_stock_picking_volume.py

```diff
@@ -16,26 +16,15 @@
                 "reception_steps": "one_step",
                 "delivery_steps": "ship_only",
                 "code": "BWH",
             }
         )
         cls.loc_stock = cls.wh.lot_stock_id
         cls.loc_customer = cls.env.ref("stock.stock_location_customers")
-        cls.product = cls.env["product.product"].create(
-            {
-                "name": "Unittest P1",
-                "product_length": 10.0,
-                "product_width": 5.0,
-                "product_height": 3.0,
-                "uom_id": cls.env.ref("uom.product_uom_unit").id,
-                "dimensional_uom_id": cls.env.ref("uom.product_uom_meter").id,
-                "type": "product",
-            }
-        )
-        cls.product.onchange_calculate_volume()
+        cls.product = cls._create_product("Unittest P1", 10.0, 5.0, 3.0)
         cls.picking_type_out = cls.env.ref("stock.picking_type_out")
         cls.picking = cls.env["stock.picking"].create(
             {
                 "picking_type_id": cls.picking_type_out.id,
                 "location_id": cls.loc_stock.id,
                 "location_dest_id": cls.loc_customer.id,
                 "partner_id": cls.env.ref("base.res_partner_1").id,
@@ -52,14 +41,30 @@
                             "location_dest_id": cls.loc_customer.id,
                         },
                     )
                 ],
             }
         )
 
+    @classmethod
+    def _create_product(cls, name, length, width, height):
+        product = cls.env["product.product"].create(
+            {
+                "name": name,
+                "product_length": length,
+                "product_width": width,
+                "product_height": height,
+                "uom_id": cls.env.ref("uom.product_uom_unit").id,
+                "dimensional_uom_id": cls.env.ref("uom.product_uom_meter").id,
+                "type": "product",
+            }
+        )
+        product.onchange_calculate_volume()
+        return product
+
     def _set_product_qty(self, product, qty):
         self.env["stock.quant"]._update_available_quantity(product, self.loc_stock, qty)
 
     def test_picking_draft_volume(self):
         """
         Data:
             one picking with one move line with 5 units of product
@@ -140,7 +145,47 @@
         self._set_product_qty(self.product, 1)
         self.picking.action_confirm()
         self.picking.action_assign()
         self.picking.move_line_ids.qty_done = 1
         self.picking.button_validate()
         self.picking.action_cancel()
         self.assertEqual(self.picking.volume, 750)
+
+    def test_picking_with_canceled_move(self):
+        """
+        Data:
+            one picking with two move lines with 5 units of product
+        Test Case:
+            set 5 unit of product as available
+            get the volume of the picking
+        Expected result:
+            volume is 5 * 10 * 5 * 3 = 750
+            The volume is computed from the expected quantity
+        """
+        product2 = self._create_product("Product2", 10.0, 5.0, 3.0)
+        self._set_product_qty(self.product, 5)
+        self._set_product_qty(product2, 5)
+        self.picking.write(
+            {
+                "move_lines": [
+                    (
+                        0,
+                        0,
+                        {
+                            "name": product2.name,
+                            "product_id": product2.id,
+                            "product_uom": product2.uom_id.id,
+                            "product_uom_qty": 5.0,
+                            "location_id": self.loc_stock.id,
+                            "location_dest_id": self.loc_customer.id,
+                        },
+                    )
+                ]
+            }
+        )
+        self.picking.action_confirm()
+        self.picking.action_assign()
+        self.picking.invalidate_cache()
+        self.assertEqual(self.picking.volume, 750 * 2)
+        self.picking.move_lines[1]._action_cancel()
+        self.picking.invalidate_cache()
+        self.assertEqual(self.picking.volume, 750)
```

## Comparing `odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/METADATA` & `odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-stock-picking-volume
-Version: 14.0.1.0.1
+Version: 14.0.1.0.2
 Summary: Compute volume information on stock moves and pickings
 Home-page: https://github.com/OCA/stock-logistics-warehouse
 Author: ACSONE SA/NV,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/RECORD` & `odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 odoo/addons/stock_picking_volume/README.rst,sha256=iCiWGHMzT06-RPdrU9SVaBNhxHdcGciQ_lEuRKROegw,4488
 odoo/addons/stock_picking_volume/__init__.py,sha256=6UknLc34WALAYuDYIL8iEh4wIIvczc_1Pt9NEtPDIs4,70
-odoo/addons/stock_picking_volume/__manifest__.py,sha256=s5tx1yjyzYV7KWBEgoSjokLR2JgoaMNIRB2QmDq0NEw,793
+odoo/addons/stock_picking_volume/__manifest__.py,sha256=lnrweeqJqH5Of0cFh6V2gDBWbBCHm1BFLohwXunaHIQ,793
 odoo/addons/stock_picking_volume/hooks.py,sha256=kibwuzeRmAPc_a8vRQdLBw_u39NG6j20d3DUtTYFIg8,1097
 odoo/addons/stock_picking_volume/i18n/stock_picking_volume.pot,sha256=e65VCJZbxlG1R53k2wfbg7FRLrl19_NLgorJyPBw2QE,2019
 odoo/addons/stock_picking_volume/models/__init__.py,sha256=0QFbzEa7qg4JnTcuuDNqW9XBiOANY6fMsGrbpZs6AMM,53
 odoo/addons/stock_picking_volume/models/stock_move.py,sha256=P2y2alJ0NcJvDUs_UeLe-60RKPQSEmCR_JrLDO4WG9I,1796
-odoo/addons/stock_picking_volume/models/stock_picking.py,sha256=eJJbjHds5WMgiXrbM9Ie-tmYPLoIR6Nz3O4KACB3A3Y,947
+odoo/addons/stock_picking_volume/models/stock_picking.py,sha256=PyvmXW1ST7QYALzIbK3taUqxdsQE2ZBMr2KfikKeaOI,1184
 odoo/addons/stock_picking_volume/readme/CONTRIBUTORS.rst,sha256=C2BJv1ftbRGFsUoiX45WM2GAj9HidRLfBd9qRLcfvKQ,123
 odoo/addons/stock_picking_volume/readme/CREDITS.rst,sha256=U1B5QEh7nUtYKzqn6vhaqOpr-lzIe98wch-oRAI32sM,99
 odoo/addons/stock_picking_volume/readme/DESCRIPTION.rst,sha256=8fETze4tOku-9h55sid-xF6D_VH1YmO5938s1iTWm3E,564
 odoo/addons/stock_picking_volume/readme/USAGE.rst,sha256=DjID9eu9w5SkoMf1J3M0IdVQdDv6ypEPj06DxUrZomE,747
 odoo/addons/stock_picking_volume/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/stock_picking_volume/static/description/index.html,sha256=TBHyzXMxTP2VaiGsTiKaAPDkw3wgQl4VtoT1IBzsLFg,14220
 odoo/addons/stock_picking_volume/tests/__init__.py,sha256=0fbgC4DzkjfqZF5ru9D3ykUr_w0_UzGFGtmuR7fx89o,40
-odoo/addons/stock_picking_volume/tests/test_stock_picking_volume.py,sha256=IKVW7RAnqX4qJcZqK-KTedVa89yyHnMqtItP1x930uY,5366
+odoo/addons/stock_picking_volume/tests/test_stock_picking_volume.py,sha256=XuGDY3rJvtzEHaz9MDbHs46HZlPPms8vbDD4Ab0yTcU,7012
 odoo/addons/stock_picking_volume/views/stock_move.xml,sha256=GQwYY9OUL6mppPwLP_yonIS7MGScASrnGAizUmvYPLE,964
 odoo/addons/stock_picking_volume/views/stock_picking.xml,sha256=EBSBIBAl0kKuF1bosSNcFG0k7HOTZ3H0XsA89f5dUsk,1083
-odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/METADATA,sha256=GIxllJsdinEPaxSpH9RF6ftviclUz3NgWBTH_u_ZDGc,5164
-odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_stock_picking_volume-14.0.1.0.1.dist-info/RECORD,,
+odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/METADATA,sha256=VQky7qshIYatojeqMEOZ-m6_q5SNCLcP8gIRmgGkmxQ,5164
+odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_stock_picking_volume-14.0.1.0.2.dist-info/RECORD,,
```

