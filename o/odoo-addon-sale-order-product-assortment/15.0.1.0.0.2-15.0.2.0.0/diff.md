# Comparing `tmp/odoo_addon_sale_order_product_assortment-15.0.1.0.0.2-py3-none-any.whl.zip` & `tmp/odoo_addon_sale_order_product_assortment-15.0.2.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,25 @@
-Zip file size: 28350 bytes, number of entries: 24
--rw-r--r--  2.0 unx     3904 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/README.rst
--rw-r--r--  2.0 unx       21 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/__init__.py
--rw-r--r--  2.0 unx      611 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/__manifest__.py
--rw-r--r--  2.0 unx     2056 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/i18n/ca.po
--rw-r--r--  2.0 unx     1940 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/i18n/es.po
--rw-r--r--  2.0 unx     2304 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/i18n/it.po
--rw-r--r--  2.0 unx     1400 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/i18n/sale_order_product_assortment.pot
--rw-r--r--  2.0 unx       55 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/models/__init__.py
--rw-r--r--  2.0 unx     2138 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/models/sale_order.py
--rw-r--r--  2.0 unx      622 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/models/sale_order_line.py
--rw-r--r--  2.0 unx      253 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      133 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      260 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      106 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      173 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/static/description/icon.png
--rw-r--r--  2.0 unx    13681 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/static/description/index.html
--rw-r--r--  2.0 unx       49 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/tests/__init__.py
--rw-r--r--  2.0 unx     2557 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/tests/test_sale_order_product_assortment.py
--rw-r--r--  2.0 unx     2326 b- defN 22-Jul-24 10:23 odoo/addons/sale_order_product_assortment/views/sale_order_view.xml
--rw-r--r--  2.0 unx     4597 b- defN 22-Jul-24 10:23 odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Jul-24 10:23 odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Jul-24 10:23 odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2832 b- defN 22-Jul-24 10:23 odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/RECORD
-24 files, 51570 bytes uncompressed, 23434 bytes compressed:  54.6%
+Zip file size: 27452 bytes, number of entries: 23
+-rw-r--r--  2.0 unx     3904 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/__init__.py
+-rw-r--r--  2.0 unx      646 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/__manifest__.py
+-rw-r--r--  2.0 unx     2056 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/i18n/ca.po
+-rw-r--r--  2.0 unx     1940 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/i18n/es.po
+-rw-r--r--  2.0 unx     2304 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/i18n/it.po
+-rw-r--r--  2.0 unx      899 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/i18n/sale_order_product_assortment.pot
+-rw-r--r--  2.0 unx       25 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/models/__init__.py
+-rw-r--r--  2.0 unx     1425 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/models/sale_order.py
+-rw-r--r--  2.0 unx      253 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      133 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      260 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      106 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      173 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/static/description/icon.png
+-rw-r--r--  2.0 unx    13681 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/static/description/index.html
+-rw-r--r--  2.0 unx       49 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/tests/__init__.py
+-rw-r--r--  2.0 unx     2557 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/tests/test_sale_order_product_assortment.py
+-rw-r--r--  2.0 unx     1499 b- defN 23-Jun-26 18:21 odoo/addons/sale_order_product_assortment/views/sale_order_view.xml
+-rw-r--r--  2.0 unx     4674 b- defN 23-Jun-26 18:22 odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-26 18:22 odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-26 18:22 odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2700 b- defN 23-Jun-26 18:22 odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/RECORD
+23 files, 48857 bytes uncompressed, 22762 bytes compressed:  53.4%
```

## zipnote {}

```diff
@@ -21,17 +21,14 @@
 
 Filename: odoo/addons/sale_order_product_assortment/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/sale_order_product_assortment/models/sale_order.py
 Comment: 
 
-Filename: odoo/addons/sale_order_product_assortment/models/sale_order_line.py
-Comment: 
-
 Filename: odoo/addons/sale_order_product_assortment/readme/CONFIGURE.rst
 Comment: 
 
 Filename: odoo/addons/sale_order_product_assortment/readme/CONTRIBUTORS.rst
 Comment: 
 
 Filename: odoo/addons/sale_order_product_assortment/readme/DESCRIPTION.rst
@@ -54,20 +51,20 @@
 
 Filename: odoo/addons/sale_order_product_assortment/tests/test_sale_order_product_assortment.py
 Comment: 
 
 Filename: odoo/addons/sale_order_product_assortment/views/sale_order_view.xml
 Comment: 
 
-Filename: odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/METADATA
+Filename: odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/WHEEL
+Filename: odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/top_level.txt
+Filename: odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/RECORD
+Filename: odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/sale_order_product_assortment/__manifest__.py

```diff
@@ -1,17 +1,17 @@
 # Copyright 2020 Tecnativa - Carlos Roca
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl)
 
 {
     "name": "Sale Order Product Assortment",
     "summary": "Module that allows to use the assortments on sale orders",
-    "version": "15.0.1.0.0",
+    "version": "15.0.2.0.0",
     "development_status": "Beta",
     "category": "Sales",
     "website": "https://github.com/OCA/sale-workflow",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "maintainers": ["CarlosRoca13"],
     "license": "AGPL-3",
     "installable": True,
-    "depends": ["sale", "product_assortment"],
+    "depends": ["sale", "product_assortment", "base_view_inheritance_extension"],
     "data": ["views/sale_order_view.xml"],
 }
```

## odoo/addons/sale_order_product_assortment/i18n/sale_order_product_assortment.pot

```diff
@@ -20,25 +20,10 @@
 
 #. module: sale_order_product_assortment
 #: model:ir.model.fields,field_description:sale_order_product_assortment.field_sale_order__has_allowed_products
 msgid "Has Allowed Products"
 msgstr ""
 
 #. module: sale_order_product_assortment
-#: model_terms:ir.ui.view,arch_db:sale_order_product_assortment.view_order_form
-msgid "Product"
-msgstr ""
-
-#. module: sale_order_product_assortment
-#: model:ir.model.fields,field_description:sale_order_product_assortment.field_sale_order_line__product_allowed_id
-msgid "Product with allowed list"
-msgstr ""
-
-#. module: sale_order_product_assortment
 #: model:ir.model,name:sale_order_product_assortment.model_sale_order
 msgid "Sales Order"
 msgstr ""
-
-#. module: sale_order_product_assortment
-#: model:ir.model,name:sale_order_product_assortment.model_sale_order_line
-msgid "Sales Order Line"
-msgstr ""
```

## odoo/addons/sale_order_product_assortment/models/__init__.py

```diff
@@ -1,2 +1 @@
 from . import sale_order
-from . import sale_order_line
```

## odoo/addons/sale_order_product_assortment/models/sale_order.py

```diff
@@ -1,48 +1,38 @@
 # Copyright 2020 Tecnativa - Carlos Roca
+# Copyright 2023 Tecnativa - Carlos Dauden
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 from odoo import api, fields, models
+from odoo.osv import expression
 
 
 class SaleOrder(models.Model):
     _inherit = "sale.order"
 
     allowed_product_ids = fields.Many2many(
         comodel_name="product.product",
         string="Allowed Products",
         compute="_compute_product_assortment_ids",
     )
     has_allowed_products = fields.Boolean(compute="_compute_product_assortment_ids")
 
     @api.depends("partner_id", "partner_shipping_id", "partner_invoice_id")
     def _compute_product_assortment_ids(self):
-        # If we don't initialize the fields we get an error with NewId
-        IrFilters = self.env["ir.filters"]
-        self.allowed_product_ids = self.env["product.product"]
-        allowed_products = self.env["product.product"]
-        not_allowed_products = self.env["product.product"]
+        self.allowed_product_ids = False
         self.has_allowed_products = False
-        partner_has_filter = False
         partner_field = (
             self.env["ir.config_parameter"]
             .sudo()
             .get_param("sale_order_product_assortment.partner_field", "partner_id")
         )
-        if self[partner_field]:
-            filters = IrFilters.browse()
-            filters_partner_domain = self.env["ir.filters"].search(
-                [("is_assortment", "=", True)]
-            )
-            for ir_filter in filters_partner_domain:
-                if self[partner_field] & ir_filter.all_partner_ids:
-                    filters |= ir_filter
-                    allowed_products += self.env["product.product"].search(
-                        ir_filter._get_eval_domain()
-                    )
-                    if ir_filter.apply_black_list_product_domain:
-                        not_allowed_products += self.env["product.product"].search(
-                            ir_filter._get_eval_black_list_domain()
-                        )
-                    partner_has_filter = True
-            self.allowed_product_ids = allowed_products - not_allowed_products
-            if self.allowed_product_ids or partner_has_filter:
+        partner = self[partner_field]
+        product_domain = []
+        if partner:
+            for ir_filter in partner.applied_assortment_ids:
+                product_domain = expression.AND(
+                    [product_domain, ir_filter._get_eval_domain()]
+                )
+            if product_domain:
+                self.allowed_product_ids = self.env["product.product"].search(
+                    product_domain
+                )
                 self.has_allowed_products = True
```

## odoo/addons/sale_order_product_assortment/views/sale_order_view.xml

### odoo/addons/sale_order_product_assortment/views/sale_order_view.xml

```diff
@@ -7,22 +7,16 @@
     <field name="arch" type="xml">
       <field name="partner_id" position="after">
         <field name="allowed_product_ids" invisible="1"/>
         <field name="has_allowed_products" invisible="1"/>
       </field>
       <!-- Form -->
       <xpath expr="//field[@name='order_line']/form//field[@name='product_id']" position="attributes">
-        <attribute name="attrs">{'invisible':[('parent.has_allowed_products', '=', True)]}</attribute>
-      </xpath>
-      <xpath expr="//field[@name='order_line']/form//field[@name='product_id']" position="after">
-        <field name="product_allowed_id" string="Product" attrs="{'invisible':[('parent.has_allowed_products', '=', False)], 'required': [('display_type', '=', False)]}" domain="[('id', 'in', parent.allowed_product_ids)]" readonly="0"/>
+        <attribute name="domain" operation="domain_add" condition="parent.has_allowed_products">[('id', 'in', parent.allowed_product_ids)]</attribute>
       </xpath>
       <!-- Tree -->
       <xpath expr="//field[@name='order_line']/tree/field[@name='product_id']" position="attributes">
-        <attribute name="attrs">{'column_invisible':[('parent.has_allowed_products', '=', True)]}</attribute>
-      </xpath>
-      <xpath expr="//field[@name='order_line']/tree/field[@name='product_id']" position="after">
-        <field name="product_allowed_id" string="Product" attrs="{'column_invisible':[('parent.has_allowed_products', '=', False)], 'required': [('display_type', '=', False)]}" domain="[('id', 'in', parent.allowed_product_ids)]" readonly="0"/>
+        <attribute name="domain" operation="domain_add" condition="parent.has_allowed_products">[('id', 'in', parent.allowed_product_ids)]</attribute>
       </xpath>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/METADATA` & `odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,22 +1,23 @@
 Metadata-Version: 2.1
 Name: odoo-addon-sale-order-product-assortment
-Version: 15.0.1.0.0.2
+Version: 15.0.2.0.0
 Summary: Module that allows to use the assortments on sale orders
 Home-page: https://github.com/OCA/sale-workflow
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 15.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Classifier: Development Status :: 4 - Beta
 Requires-Python: >=3.8
+Requires-Dist: odoo-addon-base-view-inheritance-extension (<15.1dev,>=15.0dev)
 Requires-Dist: odoo-addon-product-assortment (<15.1dev,>=15.0dev)
 Requires-Dist: odoo (<15.1dev,>=15.0a)
 
 =============================
 Sale Order Product Assortment
 =============================
```

## Comparing `odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/RECORD` & `odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,24 +1,23 @@
 odoo/addons/sale_order_product_assortment/README.rst,sha256=txaO-TTf5uGOuWewnl95CSrUcdCOwyfF5-r0xeBg1Ok,3904
 odoo/addons/sale_order_product_assortment/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/sale_order_product_assortment/__manifest__.py,sha256=Yds202d-m6IvP6q5AoKFAuBDNtTJwFSrn0sdBuPZCpQ,611
+odoo/addons/sale_order_product_assortment/__manifest__.py,sha256=-hkp1gIgWZk8jTSo3w_0sri3qiT3BMfhaQTf_g9LOOE,646
 odoo/addons/sale_order_product_assortment/i18n/ca.po,sha256=Aa5hMpu3-PjoKyBqAPJXdxmfrNhtZooSJ1lC7qwnNy8,2056
 odoo/addons/sale_order_product_assortment/i18n/es.po,sha256=pDZSb0NdduLJAznCVieBPc_D_blP_3duB314oDdvol0,1940
 odoo/addons/sale_order_product_assortment/i18n/it.po,sha256=sPEIAb8gJGLDxZGnF68JFkPbMWpEPCb3z7EikLbbsPY,2304
-odoo/addons/sale_order_product_assortment/i18n/sale_order_product_assortment.pot,sha256=exEyNfnZDYa4FHx6H84SSkvkDqNLiynb-CsVLiZ77MI,1400
-odoo/addons/sale_order_product_assortment/models/__init__.py,sha256=I_8bxDAL2gbIumsVHR6CpDY7DPu8L1SbvpT_apDxH7Y,55
-odoo/addons/sale_order_product_assortment/models/sale_order.py,sha256=j5s_8eKRTOybhgEZpLsgQFDG-MbB1lH2lwiSp4xM5Nw,2138
-odoo/addons/sale_order_product_assortment/models/sale_order_line.py,sha256=oJPEN_8tkuJetMhnhQPYYHLHN6Puv_ZlWtf106FEGgo,622
+odoo/addons/sale_order_product_assortment/i18n/sale_order_product_assortment.pot,sha256=f5l_PnzfMlo_nIs6iamMaoBisH0LVPuOZKRLwuJBZqw,899
+odoo/addons/sale_order_product_assortment/models/__init__.py,sha256=LsPoCIAYodIFzh85VEjY5GiuzDQDQpiF38txDw10qT0,25
+odoo/addons/sale_order_product_assortment/models/sale_order.py,sha256=bWWY9rV6Zd_GXM5zsDn3LcNz6vKT1B99j8B7FbDz4xE,1425
 odoo/addons/sale_order_product_assortment/readme/CONFIGURE.rst,sha256=vrFP5uXvFTCxzko74G_qyI5GQPrtK9zhQy29k2to8Bc,253
 odoo/addons/sale_order_product_assortment/readme/CONTRIBUTORS.rst,sha256=6I18bVTZGdCncQFYx-x6taF8kk4l5xJTgWg2fNx9vTc,133
 odoo/addons/sale_order_product_assortment/readme/DESCRIPTION.rst,sha256=dz1imHAC8k_5_ZQ6N-LKxuQ-Eg9_BHcjFE43MSj42tA,260
 odoo/addons/sale_order_product_assortment/readme/ROADMAP.rst,sha256=xqEEoD8anGnDP29KTl5RzRU8axrTcxioJdwDucgR7fo,106
 odoo/addons/sale_order_product_assortment/readme/USAGE.rst,sha256=bq5VRx4-VklYi8k9zux-_5ShdsZK-rlm4lxW3HCR3Nk,173
 odoo/addons/sale_order_product_assortment/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/sale_order_product_assortment/static/description/index.html,sha256=SiqDYuRqrkWfeJSUX14CzDdfW4slDeCoVVD6JHcRXik,13681
 odoo/addons/sale_order_product_assortment/tests/__init__.py,sha256=2-FHo5XaJ2Fp4x8UJ7_6udAVJ9doftxpjgutrHScBtA,49
 odoo/addons/sale_order_product_assortment/tests/test_sale_order_product_assortment.py,sha256=EhMtIQSKxYoRJaAWP7aG65mfgZQoaNUNwj6B5uu9WTk,2557
-odoo/addons/sale_order_product_assortment/views/sale_order_view.xml,sha256=f45MrmArOcmsrFPBzldX12TEG4vxejN1DeHaDwRC8M8,2326
-odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/METADATA,sha256=E_f19wAkIqX7M6d_z4sCwQ88uz1wz4JLpDuXHA_RnAk,4597
-odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_sale_order_product_assortment-15.0.1.0.0.2.dist-info/RECORD,,
+odoo/addons/sale_order_product_assortment/views/sale_order_view.xml,sha256=C7EjZ0lNslZlhkCjwbByUKCMn7PMX5NfQZx2swjei6s,1499
+odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/METADATA,sha256=zm_4JIpkENVPXz-RuquIOda09_nFEg3L2hI5BtsdkyQ,4674
+odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_sale_order_product_assortment-15.0.2.0.0.dist-info/RECORD,,
```

